# openslack 数据异常上报

解决方案为etcd
nodata用于检测监控数据的上报异常。nodata和实时报警judge模块协同工作，过程为: 配置了nodata的采集项超时未上报数据，nodata生成一条默认的模拟数据；用户配置相应的报警策略，收到mock数据就产生报警。采集项上报异常检测，作为judge模块的一个必要补充，能够使judge的实时报警功能更加可靠、完善。

需求定位

nodata只处理如下的用户需求，

监测"特征采集项"的上报异常
监测少量的、十分重要的采集项的上报异常
这里的特征采集项，指的是，能够表征某一监控采集服务数据上报情况的单个采集项。例如，falcon-agent的agent.alive指标就是一个特征采集项，它能够说明agent是否正常存活，进而能够说明通过agent上报的监控数据是否正常。

nodata所谓的异常，限定为 用户数据采集服务异常、falcon数据上报链路异常等，主要场景描述如下。nodata提供了阻塞功能，防止网络故障、falcon服务故障等导致的大面积误报警。

用户数据采集服务异常

用户数据采集服务，异常终止
用户数据采集服务，与falcon数据收集器之间的通信链路异常，使得数据无法上报
用户数据采集服务，上报的数据格式错误
falcon数据上报链路异常

agent异常，无法接收用户的数据推送、无法主动采集监控数据
agent与数据转发transfer之间通信异常
从系统边界的描述可知，nodata只是为少数重要的采集指标而设计的。nodata处理的采集项的数量，不应该多于judge的十分之一，nodata的滥用将会给falcon的运维管理带来麻烦。
